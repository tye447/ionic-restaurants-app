function _defineProperties(n,l){for(var e=0;e<l.length;e++){var u=l[e];u.enumerable=u.enumerable||!1,u.configurable=!0,"value"in u&&(u.writable=!0),Object.defineProperty(n,u.key,u)}}function _createClass(n,l,e){return l&&_defineProperties(n.prototype,l),e&&_defineProperties(n,e),n}function _classCallCheck(n,l){if(!(n instanceof l))throw new TypeError("Cannot call a class as a function")}(window.webpackJsonp=window.webpackJsonp||[]).push([[13],{"f+ep":function(n,l,e){"use strict";e.r(l);var u,t,s=e("8Y7J"),r=function n(){_classCallCheck(this,n)},i=e("pMnS"),o=e("MKJQ"),a=e("sZkV"),b=e("s7LF"),c=e("IheW"),g=((u=function(){function n(l){_classCallCheck(this,n),this.http=l}return _createClass(n,[{key:"getAllUsers",value:function(n){return this.http.get(n).pipe()}}]),n}()).ngInjectableDef=s.Ob({factory:function(){return new u(s.Pb(c.c))},token:u,providedIn:"root"}),u),d=e("RD+2"),h=((t=function(){function n(l){_classCallCheck(this,n),this.http=l}return _createClass(n,[{key:"getAllOrders",value:function(n){return this.http.get(n).pipe()}}]),n}()).ngInjectableDef=s.Ob({factory:function(){return new t(s.Pb(c.c))},token:t,providedIn:"root"}),t),p=function(){function n(l,e,u,t,s,r){_classCallCheck(this,n),this.route=l,this.fb=e,this.router=u,this.userService=t,this.restaurantsService=s,this.ordersService=r,this.urlUsers="./assets/users.json",this.urlRestaurants="./assets/restaurants.json",this.urlOrders="./assets/orders.json"}return _createClass(n,[{key:"ngOnInit",value:function(){}},{key:"ionViewWillEnter",value:function(){sessionStorage.clear(),this.name="",this.password=""}},{key:"logForm",value:function(){this.buildLoginForm(),this.setCurrentUser(this.urlUsers,this.loginForm.value.name,this.loginForm.value.password)}},{key:"buildLoginForm",value:function(){this.loginForm=this.fb.group({name:[this.name],password:[this.password]})}},{key:"setCurrentUser",value:function(n,l,e){var u=this;this.userService.getAllUsers(n).subscribe((function(n){var t=n.filter((function(n){return n.name===l})).filter((function(n){return n.password===e}))[0];window.sessionStorage.setItem("currentUser",JSON.stringify(t)),u.checkCurrentUser()}))}},{key:"checkCurrentUser",value:function(){var n=this;this.userInfo=JSON.parse(window.sessionStorage.getItem("currentUser")),null!==this.userInfo&&(0===this.userInfo.length?(alert("Invalid name or password: Please try again"),window.sessionStorage.clear()):this.router.navigateByUrl("tabs/restaurants").then((function(){n.setRestaurants(),n.setOrdersByUser()})))}},{key:"setRestaurants",value:function(){this.restaurantsService.getAllRestaurantJSON(this.urlRestaurants).subscribe((function(n){window.sessionStorage.setItem("allRestaurants",JSON.stringify(n))}))}},{key:"setOrdersByUser",value:function(){this.ordersService.getAllOrders(this.urlOrders).subscribe((function(n){var l=JSON.parse(window.sessionStorage.getItem("currentUser")),e=l.id,u=n.filter((function(n){return n.userId===parseInt(e,10)}));l.ordersCount=u.length,window.sessionStorage.setItem("currentUser",JSON.stringify(l)),window.sessionStorage.setItem("ordersCurrentUser",JSON.stringify(u))}))}}]),n}(),f=e("iInd"),m=s.nb({encapsulation:0,styles:[[""]],data:{}});function C(n){return s.Kb(0,[(n()(),s.pb(0,0,null,null,6,"ion-header",[],null,null,null,o.N,o.m)),s.ob(1,49152,null,0,a.A,[s.h,s.k,s.x],null,null),(n()(),s.pb(2,0,null,0,4,"ion-toolbar",[],null,null,null,o.bb,o.A)),s.ob(3,49152,null,0,a.yb,[s.h,s.k,s.x],null,null),(n()(),s.pb(4,0,null,0,2,"ion-title",[],null,null,null,o.ab,o.z)),s.ob(5,49152,null,0,a.wb,[s.h,s.k,s.x],null,null),(n()(),s.Ib(-1,0,["login"])),(n()(),s.pb(7,0,null,null,36,"ion-content",[],null,null,null,o.L,o.k)),s.ob(8,49152,null,0,a.t,[s.h,s.k,s.x],null,null),(n()(),s.pb(9,0,null,0,31,"form",[["novalidate",""]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngSubmit"],[null,"submit"],[null,"reset"]],(function(n,l,e){var u=!0,t=n.component;return"submit"===l&&(u=!1!==s.Bb(n,11).onSubmit(e)&&u),"reset"===l&&(u=!1!==s.Bb(n,11).onReset()&&u),"ngSubmit"===l&&(u=!1!==t.logForm()&&u),u}),null,null)),s.ob(10,16384,null,0,b.m,[],null,null),s.ob(11,4210688,null,0,b.h,[[8,null],[8,null]],null,{ngSubmit:"ngSubmit"}),s.Fb(2048,null,b.a,null,[b.h]),s.ob(13,16384,null,0,b.g,[[4,b.a]],null,null),(n()(),s.pb(14,0,null,null,11,"ion-item",[],null,null,null,o.R,o.q)),s.ob(15,49152,null,0,a.G,[s.h,s.k,s.x],null,null),(n()(),s.pb(16,0,null,0,2,"ion-label",[],null,null,null,o.S,o.r)),s.ob(17,49152,null,0,a.M,[s.h,s.k,s.x],null,null),(n()(),s.Ib(-1,0,["Name"])),(n()(),s.pb(19,0,null,0,6,"ion-input",[["autocomplete",""],["name","name"],["type","text"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"ionBlur"],[null,"ionChange"]],(function(n,l,e){var u=!0,t=n.component;return"ionBlur"===l&&(u=!1!==s.Bb(n,20)._handleBlurEvent(e.target)&&u),"ionChange"===l&&(u=!1!==s.Bb(n,20)._handleInputEvent(e.target)&&u),"ngModelChange"===l&&(u=!1!==(t.name=e)&&u),u}),o.Q,o.p)),s.ob(20,16384,null,0,a.Hb,[s.k],null,null),s.Fb(1024,null,b.d,(function(n){return[n]}),[a.Hb]),s.ob(22,671744,null,0,b.i,[[2,b.a],[8,null],[8,null],[6,b.d]],{name:[0,"name"],model:[1,"model"]},{update:"ngModelChange"}),s.Fb(2048,null,b.e,null,[b.i]),s.ob(24,16384,null,0,b.f,[[4,b.e]],null,null),s.ob(25,49152,null,0,a.F,[s.h,s.k,s.x],{autocomplete:[0,"autocomplete"],name:[1,"name"],type:[2,"type"]},null),(n()(),s.pb(26,0,null,null,11,"ion-item",[],null,null,null,o.R,o.q)),s.ob(27,49152,null,0,a.G,[s.h,s.k,s.x],null,null),(n()(),s.pb(28,0,null,0,2,"ion-label",[],null,null,null,o.S,o.r)),s.ob(29,49152,null,0,a.M,[s.h,s.k,s.x],null,null),(n()(),s.Ib(-1,0,["Password"])),(n()(),s.pb(31,0,null,0,6,"ion-input",[["name","password"],["type","password"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"ionBlur"],[null,"ionChange"]],(function(n,l,e){var u=!0,t=n.component;return"ionBlur"===l&&(u=!1!==s.Bb(n,32)._handleBlurEvent(e.target)&&u),"ionChange"===l&&(u=!1!==s.Bb(n,32)._handleInputEvent(e.target)&&u),"ngModelChange"===l&&(u=!1!==(t.password=e)&&u),u}),o.Q,o.p)),s.ob(32,16384,null,0,a.Hb,[s.k],null,null),s.Fb(1024,null,b.d,(function(n){return[n]}),[a.Hb]),s.ob(34,671744,null,0,b.i,[[2,b.a],[8,null],[8,null],[6,b.d]],{name:[0,"name"],model:[1,"model"]},{update:"ngModelChange"}),s.Fb(2048,null,b.e,null,[b.i]),s.ob(36,16384,null,0,b.f,[[4,b.e]],null,null),s.ob(37,49152,null,0,a.F,[s.h,s.k,s.x],{name:[0,"name"],type:[1,"type"]},null),(n()(),s.pb(38,0,null,null,2,"ion-button",[["type","submit"]],null,null,null,o.D,o.c)),s.ob(39,49152,null,0,a.j,[s.h,s.k,s.x],{type:[0,"type"]},null),(n()(),s.Ib(-1,0,["Login"])),(n()(),s.pb(41,0,null,0,2,"ion-text",[],null,null,null,o.Y,o.x)),s.ob(42,49152,null,0,a.tb,[s.h,s.k,s.x],null,null),(n()(),s.Ib(-1,0,["name:Arthur, password: arthur"]))],(function(n,l){var e=l.component;n(l,22,0,"name",e.name),n(l,25,0,"","name","text"),n(l,34,0,"password",e.password),n(l,37,0,"password","password"),n(l,39,0,"submit")}),(function(n,l){n(l,9,0,s.Bb(l,13).ngClassUntouched,s.Bb(l,13).ngClassTouched,s.Bb(l,13).ngClassPristine,s.Bb(l,13).ngClassDirty,s.Bb(l,13).ngClassValid,s.Bb(l,13).ngClassInvalid,s.Bb(l,13).ngClassPending),n(l,19,0,s.Bb(l,24).ngClassUntouched,s.Bb(l,24).ngClassTouched,s.Bb(l,24).ngClassPristine,s.Bb(l,24).ngClassDirty,s.Bb(l,24).ngClassValid,s.Bb(l,24).ngClassInvalid,s.Bb(l,24).ngClassPending),n(l,31,0,s.Bb(l,36).ngClassUntouched,s.Bb(l,36).ngClassTouched,s.Bb(l,36).ngClassPristine,s.Bb(l,36).ngClassDirty,s.Bb(l,36).ngClassValid,s.Bb(l,36).ngClassInvalid,s.Bb(l,36).ngClassPending)}))}var v=s.lb("app-login",p,(function(n){return s.Kb(0,[(n()(),s.pb(0,0,null,null,1,"app-login",[],null,null,null,C,m)),s.ob(1,114688,null,0,p,[f.a,b.b,f.m,g,d.a,h],null,null)],(function(n,l){n(l,1,0)}),null)}),{},{},[]),k=e("SVse"),y=function n(){_classCallCheck(this,n)};e.d(l,"LoginPageModuleNgFactory",(function(){return w}));var w=s.mb(r,[],(function(n){return s.yb([s.zb(512,s.j,s.X,[[8,[i.a,v]],[3,s.j],s.v]),s.zb(4608,k.l,k.k,[s.s,[2,k.r]]),s.zb(4608,b.l,b.l,[]),s.zb(4608,a.b,a.b,[s.x,s.g]),s.zb(4608,a.Cb,a.Cb,[a.b,s.j,s.p]),s.zb(4608,a.Fb,a.Fb,[a.b,s.j,s.p]),s.zb(1073742336,k.b,k.b,[]),s.zb(1073742336,b.k,b.k,[]),s.zb(1073742336,b.c,b.c,[]),s.zb(1073742336,a.Ab,a.Ab,[]),s.zb(1073742336,f.o,f.o,[[2,f.t],[2,f.m]]),s.zb(1073742336,y,y,[]),s.zb(1073742336,r,r,[]),s.zb(1024,f.k,(function(){return[[{path:"",component:p}]]}),[])])}))}}]);